import { useState } from 'react';
import { List, ListItemButton, ListItemIcon, ListItemText } from '@mui/material';
import { useTranslation } from 'react-i18next';
{{# if application.authentication }}
  import { useAuth } from 'react-oidc-context';
{{/ if }}
import { MdiIcon } from '~/components';

interface Props {
  handleLogout: () => void;
}

const ProfileTab = ({ handleLogout }: Props) => {
  const { t } = useTranslation();
  const [selectedIndex, setSelectedIndex] = useState(0);
  const handleListItemClick = (event: React.MouseEvent<HTMLDivElement>, index: number) => {
    setSelectedIndex(index);
  };
  {{# if application.authentication }}
      const { signoutRedirect, isAuthenticated } = useAuth();
      const doLogout = useCallback(() => {
        const redirectUrl = window.location.href.split('#')[0];
        signoutRedirect({
          post_logout_redirect_uri: redirectUrl,
        });
      }, [isAuthenticated]);
    {{/ if }}

  return (
    <List component="nav" sx={ { p: 0, '& .MuiListItemIcon-root': { minWidth: 32 } } }>
      {/*<ListItemButton*/}
      {/*  selected={selectedIndex === 0}*/}
      {/*  onClick={(event: React.MouseEvent<HTMLDivElement>) => handleListItemClick(event, 0)}*/}
      {/*>*/}
      {/*  <ListItemIcon>*/}
      {/*    <MdiIcon path="pencil-outline" />*/}
      {/*  </ListItemIcon>*/}
      {/*  <ListItemText primary="Edit Profile" />*/}
      {/*</ListItemButton>*/}
      {/*<ListItemButton*/}
      {/*  selected={selectedIndex === 1}*/}
      {/*  onClick={(event: React.MouseEvent<HTMLDivElement>) => handleListItemClick(event, 1)}*/}
      {/*>*/}
      {/*  <ListItemIcon>*/}
      {/*    <MdiIcon path="account-outline" />*/}
      {/*  </ListItemIcon>*/}
      {/*  <ListItemText primary="View Profile" />*/}
      {/*</ListItemButton>*/}

      {/*<ListItemButton*/}
      {/*  selected={selectedIndex === 3}*/}
      {/*  onClick={(event: React.MouseEvent<HTMLDivElement>) => handleListItemClick(event, 3)}*/}
      {/*>*/}
      {/*  <ListItemIcon>*/}
      {/*    <MdiIcon path="account-outline" />*/}
      {/*  </ListItemIcon>*/}
      {/*  <ListItemText primary="Social Profile" />*/}
      {/*</ListItemButton>*/}
      {/*<ListItemButton*/}
      {/*  selected={selectedIndex === 4}*/}
      {/*  onClick={(event: React.MouseEvent<HTMLDivElement>) => handleListItemClick(event, 4)}*/}
      {/*>*/}
      {/*  <ListItemIcon>*/}
      {/*    <MdiIcon path="wallet-outline" />*/}
      {/*  </ListItemIcon>*/}
      {/*  <ListItemText primary="Billing" />*/}
      {/*</ListItemButton>*/}
      {{# if application.authentication }}
      <ListItemButton selected={selectedIndex === 2} onClick={doLogout}>
        <ListItemIcon>
          <MdiIcon path="logout" />
        </ListItemIcon>
        <ListItemText primary={t('judo.security.logout', { defaultValue: 'Logout' })} />
      </ListItemButton>
      {{/ if }}
    </List>
  );
};

export default ProfileTab;
