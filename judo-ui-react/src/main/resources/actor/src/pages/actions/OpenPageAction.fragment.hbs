const {{ simpleActionDefinitionName action.actionDefinition }} = async (target: {{ classDataName action.actionDefinition.targetType '' }} | {{ classDataName action.actionDefinition.targetType 'Stored' }}, isDraftParam?: boolean) => {
  {{# and (isActionParentEagerElement action) action.targetPageDefinition.openInDialog }}
    if (isDraftParam) {
      const { result, data: returnedData } = await open{{ pageName action.targetPageDefinition }}(
        {{# if (pageHasSignedId page) }}
          { __signedIdentifier: signedIdentifier } as JudoIdentifiable<any>
        {{ else }}
          {{# if page.openInDialog }}
            ownerData
          {{ else }}
            data
          {{/ if }}
        {{/ if }},
        target,
        true,
        {{# if action.targetDataElement.isUpdateValidatable }}
        validate{{ firstToUpper action.targetDataElement.name }}
        {{/ if }}
      );
      // we might need to differentiate result handling between operation inputs and crud relation creates
      if (result === 'submit-draft' && returnedData) {
        {{# if action.targetDataElement.isCollection }}
          {{# unless page.container.table}}
            if (!payloadDiff.current.{{ action.targetDataElement.name }}) {
              payloadDiff.current.{{ action.targetDataElement.name }} = data.{{ action.targetDataElement.name }} || [];
            }
          {{/ unless }}
          const existingIndex = (payloadDiff.current.{{ action.targetDataElement.name }} || []).findIndex((r: { __identifier?: string }) => r.__identifier === returnedData.__identifier);
          if (existingIndex > -1) {
            const updatedList = [...payloadDiff.current.{{ action.targetDataElement.name }}];
            updatedList[existingIndex] = {
              ...returnedData,
            };
            storeDiff('{{ action.targetDataElement.name }}', updatedList);
          }
        {{ else }}
          storeDiff('{{ action.targetDataElement.name }}', {
            ...returnedData
          });
        {{/ if }}
        return;
      }
    } else {
  {{/ and }}
  {{# if action.targetPageDefinition.openInDialog }}
    await open{{ pageName action.targetPageDefinition }}(target!);
    await refresh();
  {{ else }}
    {{# if action.targetPageDefinition }}
      {{# if (pageHasSignedId action.targetPageDefinition) }}
      // if the `target` is missing we are likely navigating to a relation table page, in which case we need the owner's id
      {{/ if }}
      navigate(routeTo{{ pageName action.targetPageDefinition }}({{# if (pageHasSignedId action.targetPageDefinition) }}((target as {{ classDataName action.actionDefinition.targetType 'Stored' }}){{# if page.container.view }} || data{{ else }}!{{/ if }}).__signedIdentifier{{/ if }}));
      {{# if page.openInDialog }}
        onSubmit();
      {{/ if }}
    {{ else }}
      // There was no .targetPageDefinition for this action. Target Page is most likely empty in the model!
    {{/ if }}
  {{/ if }}
  {{# and (isActionParentEagerElement action) action.targetPageDefinition.openInDialog }}
    }
  {{/ and }}
};
