const {{ simpleActionDefinitionName action.actionDefinition }} = async (openCreated?: boolean) => {
  try {
    {{# unless page.dataElement.isAccess }}
    if (isDraft) {
      try {
        setIsLoading(true);
        await validate(cleanUpPayload(payloadDiff.current));
        onSubmit(data, 'submit-draft');
      } catch (error) {
        if (ownerValidation && !isErrorNestedValidationError(error, '{{ page.dataElement.name }}')) {
          // relation form has no remaining error(s), proceed with submission
          onSubmit(data, 'submit-draft');
        } else {
          let relationName: string | undefined = (isDraft && ownerValidation) ? '{{ page.dataElement.name }}' : undefined;
          handleError<{{ classDataName (getReferenceClassType page) '' }}>(error, { setValidation }, data, relationName);
        }
      } finally {
        setIsLoading(false);
      }

      return;
    }
    {{/ unless }}
    setIsLoading(true);
    const payload = dataSerializer.serialize(data, true) as typeof data;
    const queryCustomizer: { _mask?: string } | undefined = maskRequest ? {
      _mask: maskRequest,
    } : undefined;
    const { data: res } = await {{ getServiceImplForPage page }}.create{{# if action.targetDataElement }}{{ firstToUpper action.targetDataElement.name }}{{/ if }}({{# unless action.ownerDataElement.isAccess }}ownerData, {{/ unless }}payload, queryCustomizer);
    if (customActions?.post{{ firstToUpper (simpleActionDefinitionName action.actionDefinition) }}) {
      await customActions.post{{ firstToUpper (simpleActionDefinitionName action.actionDefinition) }}(data, res, onSubmit, onClose, openCreated);
    } else {
      showSuccessSnack(t('judo.action.create.success', { defaultValue: 'Create successful' }));
      await onSubmit(res, isDraft ? 'submit-draft' : 'submit', openCreated);
    }
  } catch (error) {
     handleError<{{ classDataName (getReferenceClassType page) '' }}>(error, { setValidation }, data);
  } finally {
    setIsLoading(false);
  }
};
