{{> fragment.header.hbs }}

import { format } from 'date-fns';

export const uiDateToServiceDate = (date?: any | null): string | null => {
  if (date === undefined || date === null) {
    return null;
  }

  const resolved: Date = typeof date === 'string' ? new Date(date) : date;

  return format(resolved, 'yyyy-MM-dd')
};

export const serviceDateToUiDate = (dateStr?: any) => {
  if (typeof dateStr === 'string') {
    if (dateStr.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)) {
      return new Date(dateStr);
    }
    return new Date(dateStr.endsWith('Z') ? dateStr : (dateStr + 'Z'));
  }
  return dateStr;
};

export const uiTimeToServiceTime = (time?: any | null): string | null => {
    if(time === undefined || time === null) {
        return null;
    }

    const resolved: Date = typeof time === 'string' ? new Date(time) : time;
    return resolved.getHours().toString() + ':' + resolved.getMinutes().toString();
}


export const serviceTimeToUiTime = (timeStr?: any) => {
    if (typeof timeStr === 'string') {
        let splittedTime = timeStr.split(':');
        let date: Date = new Date();
        date.setHours(Number(splittedTime[0]), Number(splittedTime[1]));
        return date;
    }
    return timeStr;
};
